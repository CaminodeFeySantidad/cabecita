<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Transmisi贸n de Pantalla</title>
</head>
<body>
<h2>Compartir Pantalla</h2>
<button id="start">Iniciar transmisi贸n</button>
<p>ID de transmisi贸n: <span id="my-id"></span></p>

<video id="preview" autoplay style="width:80%;border:1px solid #444;"></video>

<script src="https://cdn.jsdelivr.net/npm/peerjs@1/dist/peerjs.min.js"></script>
<script>
const peer = new Peer(); // crea conexi贸n con servidor PeerJS
const preview = document.getElementById("preview");

peer.on('open', id => {
  document.getElementById("my-id").textContent = id;
});

document.getElementById("start").onclick = async () => {
  const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
  preview.srcObject = stream;

  peer.on("connection", conn => {
    const call = peer.call(conn.peer, stream);
  });
};
</script>
</body>
</html>
